<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css">
 <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
 <script>hljs.highlightAll();</script>

<h2>Краткая альтернатива оператору if - тернарная операция</h2>

<p>Часто оператор <code><strong>if</strong></code> можно более компактно записать в виде <em>тернарной операции</em>. Это можно сделать, если от условия зависит не то какие действия нужно произвести, а то, какое значение, будет подставлено в некоторое место в программе.</p>

<p>Например, пусть нам нужно найти модуль числа <code>x</code>, и мы почему-то не хотим использовать стандартную функцию <code>abs</code>. Тогда вместо оператора <code><strong>if</strong>:</code></p>

<pre><code class="language-cpp">if (x &gt;= 0)
{ 
	y = x;
}
else
{
	y = -x;
}</code></pre>

<p>или чуть более короткой формы</p>

<pre><code class="language-cpp">if (x &gt;= 0) y = x; else y = -x;</code></pre>

<p>лучше записать </p>

<pre><code class="language-cpp">y = (x &gt;= 0) ? x : -x;</code></pre>

<p>В зависимости от истинности логического выражения <code>(x &gt;= 0)</code> значение выражения <code>(x &gt;= 0) ? x : -x</code> будет равно или <code>x</code>, или <code>-x</code>. Кстати, скобки здесь не обязательны и можно записать</p>

<pre><code class="language-cpp">y = x &gt;= 0 ? x : -x;</code></pre>

<p>Приведем еще несколько примеров, где уместно подобное сокращение:</p>

<p>Вместо</p>

<pre><code class="language-cpp">if (x % 2 == 0)
{
	cout &lt;&lt;"Число " &lt;&lt;x &lt;&lt;" четное!" &lt;&lt;endl;
}
else
{
	cout &lt;&lt;"Число " &lt;&lt;x &lt;&lt;" нечетное!" &lt;&lt;endl;
}
</code></pre>

<p> уместно записать</p>

<pre><code class="language-cpp">cout &lt;&lt;"Число " &lt;&lt;x &lt;&lt;" " &lt;&lt;(x % 2 == 0?"четное":"нечетное") &lt;&lt;"!" &lt;&lt;endl;</code></pre>

<p>Во втором варианте выводится вначале постоянная часть <code>"Число "</code>, потом переменная часть - целое число <code>x</code>, потом постоянная часть - пробел, затем опять переменная часть - слово <code>"четное"</code> или слово <code>"нечетное"</code>, потом опять постоянная часть - восклицательный знак, затем манипулятор <code>endl</code>.</p>

<p>На языке С мы будем использовать форматированный вывод при стандартной функции <code>printf</code>:</p>

<pre><code class="language-cpp">printf("Число %d %s!\n", x, x % 2 == 0?"четное":"нечетное");</code></pre>

<p>и это тот случай когда вариант вывода на Си даже удобнее читается - вместо %d будет подставлено целое число x, а вместо %s - строка, являющаяся результатом выражения <code>x % 2 == 0?"четное":"нечетное"</code>.</p>

<p>Но произвести замену <strong>if </strong>на тернарную операцию в таком стиле можно не всегда. Например, пусть нам нужно вывести целый ответ <code>answer</code>, но специальное значение <code>answer</code>, равное -1, обозначает, что ответа нет. Тогда можно попробовать такой способ:</p>

<pre><code class="language-cpp">cout &lt;&lt;"Answer = " &lt;&lt;(answer == -1 ? "not exists" : answer) &lt;&lt;endl;</code></pre>

<p>В зависимости от значения <code>answer</code> выводим или значение <code>answer</code> или специальное сообщение <code>"not exists"</code> (не существует). Но так нельзя - мы получим ошибку компиляции. Почему? Рассмотрим выражение <code>(answer == -1 ? "not exists" : answer)</code>. Какого оно типа? Выходит что тип выражения зависит от значения переменной <code>answer</code> - или число, или строка. Хотя мы можем вывести и число, и строку при помощи потока <code>cout</code>, так записать нельзя, так как любое выражение в языках С/С++ должно иметь четко определенный компилятором формальный тип, он не может зависеть от значений каких-то переменных, от пользовательского ввода, результата работы функций и т.д. Поэтому в выражении <code>(<em>условие</em>?<em>значение-1</em>:<em>значение-2</em>)</code> подвыражения <code><em>значение-1</em></code> и <code><em>значение-2</em></code> должны быть одного типа (или их можно привести к одному типу при помощи неявного приведения типов).</p>